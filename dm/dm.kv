#:kivy 1.0
#:import kivy kivy
#:import win kivy.core.window

<Widget>:
    # default: transparent
    border_color: (1, 1, 1, 0)

    canvas.after:
        Color:
            rgba: self.border_color

        Line:
            rectangle: self.x+1,self.y+1,self.width-1,self.height-1
            dash_offset: 5
            dash_length: 3

<ToolButton@ToggleButton>:
    tool: ""
    size_hint_y: None
    height: 50
    state: "down" if app.tool == self.tool else "normal"
    on_release: app.tool = self.tool

<PasteImageScreen>:
    BoxLayout:
        orientation: 'vertical'

        Image:
            texture: root.texture

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 50
                
            Button:
                text: "Send"
                on_release: root.do_send(app)

            Button:
                text: "Close"
                on_release: app.root.go_back()

<DMScreen>:
    FloatLayout:

        FogOfWar:
            id: fog
            source: root.mapfile
            dm: True
            #border_color: (1, 1, 0, 1)

        # toolbar
        BoxLayout:
            right: root.right
            orientation: 'vertical'
            size_hint_x: None
            width: 100

            Label:
                text: app.server
                size_hint_y: None
                height: 50

            TextInput:
                hint_text: "Custom notes"

            Label:
                text: ""
                size_hint_y: None
                height: 20

            ToolButton:
                text: "Move"
                tool: "move"

            ToolButton:
                text: "Rect"
                tool: "rect"

            Label:
                text: ""
                size_hint_y: None
                height: 20

            Button:
                text: "Sync"
                size_hint_y: None
                height: 50
                on_release: root.cmd_sync()

            Button:
                text: "Rotate: +90"
                size_hint_y: None
                height: 50
                on_release: root.cmd_adjust_rotation()

            Button:
                text: "Send Map"
                size_hint_y: None
                height: 50
                on_release: root.cmd_send_map()

            Button:
                text: "Quit"
                size_hint_y: None
                height: 50
                on_release: self.stop()


