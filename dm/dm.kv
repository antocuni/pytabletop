#:kivy 1.0
#:import kivy kivy
#:import win kivy.core.window

<Widget>:
    # default: transparent
    border_color: (1, 1, 1, 0)

    canvas.after:
        Color:
            rgba: self.border_color

        Line:
            rectangle: self.x+1,self.y+1,self.width-1,self.height-1
            dash_offset: 5
            dash_length: 3


FloatLayout:

    FogOfWar:
        id: fog
        locked: root.ids.locked.active
        source: "map.png"
        dm: True
        #border_color: (1, 1, 0, 1)

    # toolbar
    BoxLayout:
        right: root.right
        orientation: 'vertical'
        size_hint_x: None
        width: 100

        Button:
            text: "Sync"
            size_hint_y: None
            height: 50
            on_release: app.do_sync()

        Button:
            text: "Rect"
            size_hint_y: None
            height: 50
            on_release: app.do_rect()

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 50

            Label:
                text: "Locked"
            CheckBox:
                id: locked
                active: True

        Button:
            text: "Rotate +90"
            size_hint_y: None
            height: 50
            on_release: root.ids.fog.rotation += 90

        Button:
            text: "Rotate -90"
            size_hint_y: None
            height: 50
            on_release: root.ids.fog.rotation -= 90

        Button:
            text: "Zoom +"
            size_hint_y: None
            height: 50
            on_release: root.ids.fog.scale += 0.1

        Button:
            text: "Zoom -"
            size_hint_y: None
            height: 50
            on_release: root.ids.fog.scale -= 0.1

        Button:
            text: "Quit"
            size_hint_y: None
            height: 50
            on_release: app.stop()
