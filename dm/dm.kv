#:kivy 1.0
#:import kivy kivy
#:import win kivy.core.window

<Widget>:
    # default: transparent
    border_color: (1, 1, 1, 0)

    canvas.after:
        Color:
            rgba: self.border_color

        Line:
            rectangle: self.x+1,self.y+1,self.width-1,self.height-1
            dash_offset: 5
            dash_length: 3

<ToolButton@ToggleButton>:
    group: "tool"
    tool: ""
    size_hint_y: None
    height: 50
    allow_no_selection: False
    on_release: app.update_tool()

FloatLayout:

    FogOfWar:
        id: fog
        source: "map.png"
        dm: True
        #border_color: (1, 1, 0, 1)

    # toolbar
    BoxLayout:
        right: root.right
        orientation: 'vertical'
        size_hint_x: None
        width: 100

        ToolButton:
            text: "Move"
            tool: "move"

        ToolButton:
            text: "Rect"
            tool: "rect"

        Label:
            text: ""
            size_hint_y: None
            height: 20

        Button:
            text: "Sync"
            size_hint_y: None
            height: 50
            on_release: app.do_sync()

        Button:
            text: "Rotate: +90"
            size_hint_y: None
            height: 50
            on_release: app.adjust_rotation()

        Button:
            text: "Quit"
            size_hint_y: None
            height: 50
            on_release: app.stop()
